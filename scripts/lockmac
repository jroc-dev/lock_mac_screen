#!/usr/bin/env bash

printusage () {
    echo "Usage: maclock [-l]"
    echo ""
    echo "       -l, --lock    : lock the display"
}

LOCK_COMPUTER=false

for i in "$@"
do
    case $i in
        --help|-h)
            printusage
            exit 1
            ;;
        --lock|-l)
	    LOCK_COMPUTER=true
            shift
            ;;
        *)
            printusage
            exit 1
            ;;
    esac
done

# Lock computer
if [[ $LOCK_COMPUTER = true ]] ; then

    osascript -e 'tell application "System Events"' -e 'log out' -e 'keystroke return' -e end

fi

exit 0
